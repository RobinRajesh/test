<!DOCTYPE html>
<html>
<head>
  <style>
    body,html{margin:0}
  </style>
  <script>
    !function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-105384030-1","auto"),ga("send","pageview");
  </script>
  <link rel="stylesheet" href="style.css">
  <title>Maze</title>
</head>
<body>
  <canvas id="canvas" width="1500" height="800" style="align-items: center;"></canvas>
  <script>
    function clearCircle(t,i,e,o){t.save(),t.beginPath(),t.arc(i,e,o,0,2*Math.PI,!0),t.clip(),t.clearRect(i-o,e-o,2*o,2*o),t.restore()}(function(){var t=function(t,i){i=i||{},this.distance=1e3,this.lookat=[0,0],this.context=t,this.fieldOfView=i.fieldOfView||Math.PI/4,this.viewport={left:0,right:0,top:0,bottom:0,width:0,height:0,scale:[1,1]},this.updateViewport()};t.prototype={begin:function(){this.context.save(),this.applyScale(),this.applyTranslation()},end:function(){this.context.restore()},applyScale:function(){this.context.scale(this.viewport.scale[0],this.viewport.scale[1])},applyTranslation:function(){this.context.translate(-this.viewport.left,-this.viewport.top)},updateViewport:function(){this.aspectRatio=this.context.canvas.width/this.context.canvas.height,this.viewport.width=this.distance*Math.tan(this.fieldOfView),this.viewport.height=this.viewport.width/this.aspectRatio,this.viewport.left=this.lookat[0]-this.viewport.width/2,this.viewport.top=this.lookat[1]-this.viewport.height/2,this.viewport.right=this.viewport.left+this.viewport.width,this.viewport.bottom=this.viewport.top+this.viewport.height,this.viewport.scale[0]=this.context.canvas.width/this.viewport.width,this.viewport.scale[1]=this.context.canvas.height/this.viewport.height},zoomTo:function(t){this.distance=t,this.updateViewport()},moveTo:function(t,i){this.lookat[0]=t,this.lookat[1]=i,this.updateViewport()},screenToWorld:function(t,i,e){return e=e||{},e.x=t/this.viewport.scale[0]+this.viewport.left,e.y=i/this.viewport.scale[1]+this.viewport.top,e},worldToScreen:function(t,i,e){return e=e||{},e.x=(t-this.viewport.left)*this.viewport.scale[0],e.y=(i-this.viewport.top)*this.viewport.scale[1],e}},this.Camera=t}).call(this);
  </script>
  <script>
    var VirtualJoystick=function(t){t=t||{},this._container=t.container||document.body,this._strokeStyle=t.strokeStyle||"cyan",this._stickEl=t.stickElement||this._buildJoystickStick(),this._baseEl=t.baseElement||this._buildJoystickBase(),this._mouseSupport=void 0!==t.mouseSupport?t.mouseSupport:!1,this._stationaryBase=t.stationaryBase||!1,this._baseX=this._stickX=t.baseX||0,this._baseY=this._stickY=t.baseY||0,this._limitStickTravel=t.limitStickTravel||!1,this._stickRadius=void 0!==t.stickRadius?t.stickRadius:100,this._useCssTransform=void 0!==t.useCssTransform?t.useCssTransform:!1,this._container.style.position="relative",this._container.appendChild(this._baseEl),this._baseEl.style.position="absolute",this._baseEl.style.display="none",this._container.appendChild(this._stickEl),this._stickEl.style.position="absolute",this._stickEl.style.display="none",this._pressed=!1,this._touchIdx=null,this._stationaryBase===!0&&(this._baseEl.style.display="",this._baseEl.style.left=this._baseX-this._baseEl.width/2+"px",this._baseEl.style.top=this._baseY-this._baseEl.height/2+"px"),this._transform=this._useCssTransform?this._getTransformProperty():!1,this._has3d=this._check3D();var s=function(t,s){return function(){return t.apply(s,arguments)}};this._$onTouchStart=s(this._onTouchStart,this),this._$onTouchEnd=s(this._onTouchEnd,this),this._$onTouchMove=s(this._onTouchMove,this),this._container.addEventListener("touchstart",this._$onTouchStart,!1),this._container.addEventListener("touchend",this._$onTouchEnd,!1),this._container.addEventListener("touchmove",this._$onTouchMove,!1),this._mouseSupport&&(this._$onMouseDown=s(this._onMouseDown,this),this._$onMouseUp=s(this._onMouseUp,this),this._$onMouseMove=s(this._onMouseMove,this),this._container.addEventListener("mousedown",this._$onMouseDown,!1),this._container.addEventListener("mouseup",this._$onMouseUp,!1),this._container.addEventListener("mousemove",this._$onMouseMove,!1))};VirtualJoystick.prototype.destroy=function(){this._container.removeChild(this._baseEl),this._container.removeChild(this._stickEl),this._container.removeEventListener("touchstart",this._$onTouchStart,!1),this._container.removeEventListener("touchend",this._$onTouchEnd,!1),this._container.removeEventListener("touchmove",this._$onTouchMove,!1),this._mouseSupport&&(this._container.removeEventListener("mouseup",this._$onMouseUp,!1),this._container.removeEventListener("mousedown",this._$onMouseDown,!1),this._container.removeEventListener("mousemove",this._$onMouseMove,!1))},VirtualJoystick.touchScreenAvailable=function(){return"createTouch"in document},function(t){t.addEventListener=function(t,s){return void 0===this._events&&(this._events={}),this._events[t]=this._events[t]||[],this._events[t].push(s),s},t.removeEventListener=function(t,s){void 0===this._events&&(this._events={}),t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(s),1)},t.dispatchEvent=function(t){if(void 0===this._events&&(this._events={}),void 0!==this._events[t])for(var s=this._events[t].slice(),i=0;i<s.length;i++){var e=s[i].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==e)return e}}}(VirtualJoystick.prototype),VirtualJoystick.prototype.deltaX=function(){return this._stickX-this._baseX},VirtualJoystick.prototype.deltaY=function(){return this._stickY-this._baseY},VirtualJoystick.prototype.up=function(){if(this._pressed===!1)return!1;var t=this.deltaX(),s=this.deltaY();return s>=0?!1:!(Math.abs(t)>2*Math.abs(s))},VirtualJoystick.prototype.down=function(){if(this._pressed===!1)return!1;var t=this.deltaX(),s=this.deltaY();return 0>=s?!1:!(Math.abs(t)>2*Math.abs(s))},VirtualJoystick.prototype.right=function(){if(this._pressed===!1)return!1;var t=this.deltaX(),s=this.deltaY();return 0>=t?!1:!(Math.abs(s)>2*Math.abs(t))},VirtualJoystick.prototype.left=function(){if(this._pressed===!1)return!1;var t=this.deltaX(),s=this.deltaY();return t>=0?!1:!(Math.abs(s)>2*Math.abs(t))},VirtualJoystick.prototype._onUp=function(){this._pressed=!1,this._stickEl.style.display="none",0==this._stationaryBase&&(this._baseEl.style.display="none",this._baseX=this._baseY=0,this._stickX=this._stickY=0)},VirtualJoystick.prototype._onDown=function(t,s){if(this._pressed=!0,0==this._stationaryBase&&(this._baseX=t,this._baseY=s,this._baseEl.style.display="",this._move(this._baseEl.style,this._baseX-this._baseEl.width/2,this._baseY-this._baseEl.height/2)),this._stickX=t,this._stickY=s,this._limitStickTravel===!0){var i=this.deltaX(),e=this.deltaY(),o=Math.sqrt(i*i+e*e);if(o>this._stickRadius){var n=i/o,r=e/o;this._stickX=n*this._stickRadius+this._baseX,this._stickY=r*this._stickRadius+this._baseY}}this._stickEl.style.display="",this._move(this._stickEl.style,this._stickX-this._stickEl.width/2,this._stickY-this._stickEl.height/2)},VirtualJoystick.prototype._onMove=function(t,s){if(this._pressed===!0){if(this._stickX=t,this._stickY=s,this._limitStickTravel===!0){var i=this.deltaX(),e=this.deltaY(),o=Math.sqrt(i*i+e*e);if(o>this._stickRadius){var n=i/o,r=e/o;this._stickX=n*this._stickRadius+this._baseX,this._stickY=r*this._stickRadius+this._baseY}}this._move(this._stickEl.style,this._stickX-this._stickEl.width/2,this._stickY-this._stickEl.height/2)}},VirtualJoystick.prototype._onMouseUp=function(){return this._onUp()},VirtualJoystick.prototype._onMouseDown=function(t){t.preventDefault();var s=t.clientX,i=t.clientY;return this._onDown(s,i)},VirtualJoystick.prototype._onMouseMove=function(t){var s=t.clientX,i=t.clientY;return this._onMove(s,i)},VirtualJoystick.prototype._onTouchStart=function(t){if(null===this._touchIdx){var s=this.dispatchEvent("touchStartValidation",t);if(s!==!1){this.dispatchEvent("touchStart",t),t.preventDefault();var i=t.changedTouches[0];this._touchIdx=i.identifier;var e=i.pageX,o=i.pageY;return this._onDown(e,o)}}},VirtualJoystick.prototype._onTouchEnd=function(t){if(null!==this._touchIdx){this.dispatchEvent("touchEnd",t);for(var s=t.changedTouches,i=0;i<s.length&&s[i].identifier!==this._touchIdx;i++);if(i!==s.length)return this._touchIdx=null,t.preventDefault(),this._onUp()}},VirtualJoystick.prototype._onTouchMove=function(t){if(null!==this._touchIdx){for(var s=t.changedTouches,i=0;i<s.length&&s[i].identifier!==this._touchIdx;i++);if(i!==s.length){var e=s[i];t.preventDefault();var o=e.pageX,n=e.pageY;return this._onMove(o,n)}}},VirtualJoystick.prototype._buildJoystickBase=function(){var t=document.createElement("canvas");t.width=126,t.height=126;var s=t.getContext("2d");return s.beginPath(),s.strokeStyle=this._strokeStyle,s.lineWidth=6,s.arc(t.width/2,t.width/2,40,0,2*Math.PI,!0),s.stroke(),s.beginPath(),s.strokeStyle=this._strokeStyle,s.lineWidth=2,s.arc(t.width/2,t.width/2,60,0,2*Math.PI,!0),s.stroke(),t},VirtualJoystick.prototype._buildJoystickStick=function(){var t=document.createElement("canvas");t.width=86,t.height=86;var s=t.getContext("2d");return s.beginPath(),s.strokeStyle=this._strokeStyle,s.lineWidth=6,s.arc(t.width/2,t.width/2,40,0,2*Math.PI,!0),s.stroke(),t},VirtualJoystick.prototype._move=function(t,s,i){this._transform?this._has3d?t[this._transform]="translate3d("+s+"px,"+i+"px, 0)":t[this._transform]="translate("+s+"px,"+i+"px)":(t.left=s+"px",t.top=i+"px")},VirtualJoystick.prototype._getTransformProperty=function(){for(var t,s=["webkitTransform","MozTransform","msTransform","OTransform","transform"],i=document.createElement("p"),e=0;e<s.length;e++)if(t=s[e],null!=i.style[t])return t},VirtualJoystick.prototype._check3D=function(){var t=this._getTransformProperty();if(!t||!window.getComputedStyle)return module.exports=!1;var s={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},i=document.createElement("div");i.style[t]="translate3d(1px,1px,1px)",document.body.insertBefore(i,null);var e=getComputedStyle(i).getPropertyValue(s[t]);document.body.removeChild(i);var o=null!=e&&e.length&&"none"!=e;return o};
  </script>        
  <script>
    function preventDefault(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function preventDefaultForScrollKeys(e){return keys[e.keyCode]?(preventDefault(e),!1):void 0}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function init(){canvas.getContext&&(window.addEventListener("resize",resizeCanvas,!1),window.addEventListener("orientationchange",resizeCanvas,!1),resizeCanvas()),resizeCanvas()}function resizeCanvas(){document.createElement("canvas");tempCanvas.width=canvas.width,tempCanvas.height=canvas.height,tmpCtx=tempCanvas.getContext("2d"),tempCanvas.drawImage(canvas,0,0),canvas.width=window.innerWidth,canvas.height=window.innerHeight,ctx=canvas.getContext("2d"),ctx.drawImage(tempCanvas,0,0,tempCanvas.width,tempCanvas.height,0,0,canvas.width,canvas.height),canvas.style.width=window.innerWidth,canvas.style.height=window.innerHeight}function genMaze(e,t,n,a){var o=[],l=new Array(t);for(l.fill(2),o.push(l),i=0;i<=e;i++){var l=[];for(l.push(2),j=0;j<=t-3;j++)l.push(1);l.push(2),o.push(l)}var l=new Array(t);l.fill(2),o.push(l);var r=n,c=a;o[c][r]=0;for(var s=1,d="#FFFFFF",u=-9,v=[],h=["Left","Right","Up","Down"],f=h[Math.floor(Math.random()*h.length)];o[a][n]>-10;){d="#FFFFFF","Right"==f&&e>r+2&&o[c][r+2]>=1&&"Left"!=u?(r+=2,o[c][r-1]-=1,s=1,u=f,v.push(f),h.push("Right")):"Left"==f&&r-2>0&&o[c][r-2]>=1&&"Right"!=u?(r-=2,o[c][r+1]-=1,s=1,u=f,v.push(f),h.push("Left")):"Down"==f&&t>c+2&&o[c+2][r]>=1&&"Up"!=u?(c+=2,o[c-1][r]-=1,s=1,u=f,v.push(f),h.push("Down")):"Up"==f&&c-2>0&&o[c-2][r]>=1&&"Down"!=u?(c-=2,o[c+1][r]-=1,s=1,u=f,v.push(f),h.push("Up")):"Down"==v[v.length-1]&&s>8?(c-=2,o[c+1][r]-=1,s=1,u=f,v.pop()):"Up"==v[v.length-1]&&s>8?(c+=2,o[c-1][r]-=1,s=1,u=f,v.pop()):"Right"==v[v.length-1]&&s>8?(r-=2,o[c][r+1]-=1,s=1,u=f,v.pop()):"Left"==v[v.length-1]&&s>8&&(r+=2,o[c][r-1]-=1,s=1,u=f,v.pop());var f=h[Math.floor(Math.random()*h.length)];o[c][r]-=1,s++}return o}function update(){if(requestAnimationFrame(update),(keys[38]||joystick.up())&&velY>-speed&&velY--,(keys[40]||joystick.down())&&speed>velY&&velY++,(keys[39]||joystick.right())&&speed>velX&&velX++,(keys[37]||joystick.left())&&velX>-speed&&velX--,velY*=friction,velX*=friction,(maze[Math.floor(y/25)][Math.floor((x+velX)/25)]>0||maze[Math.round(y/25)][Math.round((x+velX)/25)]>0)&&(velX=0),(maze[Math.floor((y+velY)/25)][Math.floor(x/25)]>0||maze[Math.round((y+velY)/25)][Math.round(x/25)]>0)&&(velY=0),(99==Math.floor(x/25)&&99==Math.floor(y/25)||99==Math.round(x/25)&&99==Math.round(y/25))&&(win=!0),1!=begin&&1!=lose&&1!=win){y=Math.round(y+velY),x=Math.round(x+velX);camera.worldToScreen(x,y);camera.moveTo(Math.floor(x),Math.floor(y))}x>=2487&&(x=2487),y>2513&&(y=2500),ctx.fillStyle="#000000",ctx.fillRect(0,0,canvas.width,canvas.height),camera.begin();var e=new Date,t=e-startDate;t/=1e3;var n=Math.round(t%60);if(n>=Wait&&0==begin&&0==win)for(startDate=new Date,Wait-=1,maze=genMaze(100,100,1,1);maze[Math.round(y/25)][Math.round(x/25)]>0||maze[Math.floor(y/25)][Math.floor(x/25)]>0;)maze=genMaze(100,100,1,1);for(var a=0;a<maze.length;a++)for(var o=maze[a],i=0;i<o.length;i++)if(o[i]<=0){document.getElementById("canvas");99==a&&99==i?ctx.fillStyle="#FF0000":1==a&&1==i?ctx.fillStyle="#00FF00":ctx.fillStyle="#CFCFCF",ctx.fillRect(25*i,25*a,26,26),ctx.stroke()}1==begin&&anim>=0&&1!=beginCount&&(camera.moveTo(anim,anim),anim-=animationSpeed),ctx.beginPath(),ctx.fillStyle="#0000FF",ctx.fillRect(x,y,14,14),ctx.fill(),camera.end(),1==begin&&1!=beginCount&&(ctx.font="60px Arial",ctx.fillStyle="#000000",ctx.fillText("",195,310),ctx.fillStyle="#2424cc",ctx.fillText("",185,300)),1==waitClick&&(ctx.font="20px Arial",ctx.fillStyle="#FFFFFF",ctx.fillText("Click to Start",485,500),ctx.fillStyle="#000000",ctx.fillText("",445,520)),1!=begin&&0==lose&&0==win&&(ctx.font="30px Arial",ctx.fillStyle="#FF0000",ctx.fillText(String(Wait-n),canvas.width-50,canvas.height-50)),0>Wait&&(ctx.font="60px Arial",ctx.fillStyle="#FF0000",ctx.fillText("You Lose",.5*canvas.width,.5*canvas.height),lose=!0),1==win&&0==lose&&(ctx.font="60px Arial",ctx.fillStyle="#00FF00",ctx.fillText("You Win",300,300)),1==beginCount&&(ctx.font="60px Arial",ctx.fillStyle="#FF0000",CountDown>=1?ctx.fillText(Math.floor(CountDown),500,300):(0>=CountDown||CountDown>-1)&&(ctx.fillText("GO!",500,300),Wait=15,begin=!1),-2>CountDown&&(startDate=new Date,beginCount=!1),CountDown-=.02)}function doMouseDown(){waitClick=!1,1==begin&&(beginCount=!0,camera.moveTo(x,y))}var canvas=document.getElementById("canvas");canvas.setAttribute("style","position: absolute; margin-left:-500px; left: 50%; top: 50%;margin-top:-5px; ");var ctx=canvas.getContext("2d"),camera=new Camera(ctx),canvas,canvasWidth,joystick=new VirtualJoystick({mouseSupport:!1,limitStickTravel:!0,stickRadius:50,strokeStyle:"#4444cc"}),keys={37:1,38:1,39:1,40:1},coords=camera.worldToScreen(0,0);camera.moveTo(coords.x,coords.y),ctx.fillStyle="black",ctx.fillRect(0,0,canvas.width,canvas.height);var startDate=new Date,Wait=15,begin=!0,anim=2575,CountDown=3.9,beginCount=!1,lose=!1,win=!1,dispText="None",textTimer=0,waitClick=!0,animationSpeed=5;disableScroll();var maze=genMaze(100,100,1,1),x=25,y=25,velY=0,velX=0,speed=2.5,friction=.88,keys=[];/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(speed=2.25,camera.zoomTo(300),animationSpeed=2,disableScroll()),update(),document.body.addEventListener("keydown",function(e){keys[e.keyCode]=!0}),document.body.addEventListener("keyup",function(e){keys[e.keyCode]=!1}),document.body.addEventListener("click",doMouseDown),document.body.addEventListener("touchstart",doMouseDown),document.body.addEventListener("touchmove",function(){});
  </script>
</body>
</html>